---
layout: page
# title: Nature Notes
---

<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">

<div id="notes"></div>
<script>
  const sheetURL = "https://elliescope.github.io/data/notes.json";

fetch(sheetURL)
  .then(res => res.json())
  .then(data => {
    const container = document.getElementById("notes");
    container.innerHTML = data.map(note => {
      // get media list (images/videos)
      let mediaList = [];
      if (note.images && Array.isArray(note.images)) {
        mediaList = note.images;
      } else if (note.image) {
        mediaList = note.image
          .split(/[\n,]+/)
          .map(s => s.trim())
          .filter(Boolean);
      }

      // create HTML for media
      const mediaHTML = mediaList
        .map(src => {
          if (src.match(/\.(mp4|webm|mov)$/i)) {
            return `<video controls muted playsinline src="${src}"></video>`;
          } else {
            return `<img src="${src}" alt="">`;
          }
        })
        .join("");

      // determine layout class
      let noteClass = "note";  // define it here
      if (mediaList.length === 1) {
        noteClass += " single-image right";
      } else if (mediaList.length > 1) {
        noteClass += " multi-image";
      }

      // optional inline style for multi-image container
      let mediaStyle = "";
      if (mediaList.length > 1) {
        mediaStyle = `style="display:flex; gap:10px; width:100%;"`;
      }

      return `
        <div class="${noteClass}">
          <div class="note-content">
            <h3>${note.title}</h3>
            <p><em>${note.date ? note.date.split("T")[0] : ""}</em></p>
            <p>${note.content.replace(/\n/g, "<br>")}</p>
          </div>
          <div class="note-images" ${mediaStyle}>${mediaHTML}</div>
        </div>
      `;
    }).join("");

    // after DOM created, set image/video widths dynamically for multi-image notes
    document.querySelectorAll('.note.multi-image').forEach(noteDiv => {
      const imgs = noteDiv.querySelectorAll('img, video');
      const count = imgs.length;
      imgs.forEach(img => {
        img.style.width = `calc(${100/count}% - ${(count-1)*10/count}px)`;
      });
    });
  })
  .catch(err => {
    document.getElementById("notes").innerHTML = "Failed to load notes.";
    console.error(err);
  });
</script>


<style>
/* Container for each note */
.note {
  margin: 20px 0; /* optional: reduce top/bottom spacing */
  padding: 15px 15px 10px 15px; /* bottom padding smaller */
  border-bottom: 2px solid #ddd;
}

.note-content {
  margin-bottom: 5px; /* reduce space below text */
}

.note.single-image {
  display: flex;
  flex-direction: row;
  align-items: flex-start;
}

.note.single-image .note-content {
  flex: 1; /* text takes remaining space */
}

.note.single-image .note-images {
  flex: 0 0 50%;  /* make image take 50% of width */
  max-width: 700px; 
  margin-left: 10px;  /* if image on right */
  margin-right: 0;    /* optional if image on left */
  margin-top: auto;    /* push to bottom */
  margin-bottom: 10px; /* leave 20px space from bottom */
}

.note.single-image.right .note-images {
  order: 1; /* image on right */
}

.note.single-image.left .note-images {
  order: -1; /* image on left */
}

.note.single-image .note-images img,
.note.single-image .note-images video {
  width: 100%;
  height: auto;
  border-radius: 8px;
  object-fit: cover;
}

.note.multi-image .note-images {
  display: flex;
  flex-wrap: nowrap;
  justify-content: space-between;
  margin-bottom: 15px;
  width: 100%;
  gap: 10px;
}

.note.multi-image .note-images img,
.note.multi-image .note-images video {
  height: auto;
  max-height: 400px;
  border-radius: 10px;
  object-fit: cover;
}

/* Responsive for small screens */
@media (max-width: 700px) {
  /* Single-image notes stacked */
  .note.single-image {
    flex-direction: column;
  }

  .note.single-image .note-images {
    width: 100%;
    max-width: 100%;
    margin-left: 0;
    margin-top: 10px;
  }

  .note.single-image.right .note-images,
  .note.single-image.left .note-images {
    order: 0;
  }

  .note.single-image .note-content {
    flex: none;
  }

  /* Multi-image notes stacked */
  .note.multi-image .note-images {
    flex-direction: column;  /* stack images vertically */
    gap: 10px;               /* spacing between images */
  }

  .note.multi-image .note-images img,
  .note.multi-image .note-images video {
    width: 100% !important;  /* full width for each media */
    max-width: 100%;
    height: auto;
  }
}
</style>


